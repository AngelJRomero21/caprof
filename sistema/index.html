<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:url" content="https://caprofuptet.cromstudio.com.ve" />
    <meta property="og:title" content="CAJA DE AHORROS DE LOS PROFESORES DE LA UNIVERSIDAD POLITECNICA TERRITORIAL DEL ESTADO TRUJILLO - Sistema de Consulta" />
    <meta property="og:description" content="Consulta Saldo, Compra Acciones, Calcula intereses, entre otros." />
    <meta property="og:image" content="https://caes.cromstudio.com.ve/img/logo1.png" />





<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-L419MTZYJQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-L419MTZYJQ');
</script>
    



<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <title>CAJA DE AHORROS DE LOS PROFESORES DE LA UNIVERSIDAD POLITECNICA TERRITORIAL DEL ESTADO TRUJILLO - SISTEMA DE CONSULTA ONLINE</title>
    <style>
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background-color: #f9f9f9;
}

.flex-caes {

    display: flex;
    align-items: center;
    width: 100%;
}
.img-izq {
    width: 60%;
}


.img-izq img {
    height: 100vh;
    object-fit: cover;
    width: 100%;
}
.container {
    text-align: center;
    width: 40%;
}
.container-two {
    width: 90%;
    margin: auto;


}

.logo {
    max-width: 250px;
    height: auto;
    width: 100%;    
    padding-bottom: 30px;

}

.options {
    display: flex;
    flex-direction: column;
    gap: 15px;
    max-width: 300px;
    margin: 0 auto;
    max-width: 100%;
    flex-direction: row;
    margin: auto;
    align-items: center;
    justify-content: center;
}

.btn {
    padding: 15px;
    border: none;
    border-radius: 8px;
    font-size: 1.2rem;
    cursor: pointer;
    text-decoration: none;
    transition: background-color 0.3s ease;
    display: block;
    width: fit-content;
}

.btn:hover {
    filter: brightness(0.9);
}

.consultar {
    background-color: #3498db;
    color: white;
}

.calcular {
    background-color: #007acc;
    color: white;
}

.registrarse {
    background-color: #e74c3c;
    color: white;
}
/* */
.button svg {
    max-width: 30px;
    width: 100%;
    max-height: 30px;

}
.button {
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 5px 10px;
  gap: 5px;
  background-color: #007ACC;
  outline: 3px #007ACC solid;
  outline-offset: -3px;
  border-radius: 5px;
  border: none;
  cursor: pointer;
  transition: 400ms;
  width: 160px;
}
.button .text {
  color: white;
  font-weight: 700;
  font-size: 12px;
  transition: 400ms;
}
.button svg path {
  transition: 400ms;
}
.button:hover {
  background-color: transparent;
}
.button:hover .text {
  color: #ffffff;
}
.button:hover svg path {
  fill: #ffffff;
}
.button.csls{
    background-color: #007acc;
    outline: 3px #007acc solid;
}
.button.calccred{
    background-color: #e49c2c;
    outline: 3px #e49c2c solid;
}
.button.regdig{
    background-color: #327ef9;
    outline: 3px #327ef9 solid;
}
a{
    text-decoration: none;

}
.detailedBalances {
    display: flex;
    justify-content: space-between; /* Alinea los saldos horizontalmente */
    gap: 10px; /* Espacio entre cada saldo */
}
.balanceDetail {
    text-align: center;
}
.label {
    font-size: 14px;
    color: #ffffff;
}
.value {
    font-size: 16px;
    font-weight: bold;
    color: #ffffff;
}
.walletBalanceCard {
    max-width: 400px;
    width: 100%;
  height: 110px;
  background-color: #173259;
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 12px;
  padding: 0px 12px;
  font-family: Arial, Helvetica, sans-serif;
}
.svgwrapper {
  width: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.svgwrapper svg {
  width: 100%;
}
.balancewrapper {
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  flex-direction: column;
  width: 180px;
  gap: 0px;
}
.balanceHeading {
  font-size: 16px;
  color: rgb(214, 214, 214);
  font-weight: 100;
  letter-spacing: 0.6px;
}
.balance {
  font-size: 22px;
  color: white;
  font-weight: 600;
  letter-spacing: 0.5px;
}
.addmoney {
  padding: 1px 10px;
  border-radius: 7px;
  background-color: #007acc;
  color: white;
  border: none;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  font-weight: 700;
}
.addmoney:hover {
  background-color: whitesmoke;
  color: #007acc;
}
.plussign {
  font-size: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
}
div#resultado {
    display: flex;
    flex-direction: column;
    align-items: center;
}
div#resultado img {
    max-width: 200px;
    width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 50%;
    object-position: center;
    border: 6px solid #007acc;
}
.hide{
    display: none !important;
}
p.saludo {
    margin-bottom: 0;
}
.nombre {
    font-size: 20px;
    font-weight: bold;
}
/* formulario */
.form_main {
  width: 280px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: rgb(255, 255, 255);
  padding: 30px 30px 30px 30px;
  border-radius: 30px;
  box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.062);
}
.heading {
  font-size: 25px;
  color: #2e2e2e;
  font-weight: 700;
  margin: 15px 0 30px 0;
}
.inputContainer {
  width: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}
.inputIcon {
  position: absolute;
  left: 10px;
}
.inputField {
  width: 100%;
  height: 40px;
  background-color: transparent;
  border: none;
  border-bottom: 2px solid rgb(173, 173, 173);
  border-radius: 30px;
  margin: 10px 0;
  color: black;
  font-size: .8em;
  font-weight: 500;
  box-sizing: border-box;
  padding-left: 30px;
}
.inputField:focus {
  outline: none;
  border-bottom: 2px solid #357f26;
}
.inputField::placeholder {
  color: rgb(80, 80, 80);
  font-size: 1em;
  font-weight: 500;

}
#button {
  position: relative;
  width: 100%;
  border: 2px solid #007acc;
  background-color: #007acc;
  height: 40px;
  color: white;
  font-size: .8em;
  font-weight: 500;
  letter-spacing: 1px;
  border-radius: 30px;
  margin: 10px;
  cursor: pointer;
  overflow: hidden;
}
#button::after {
  content: "";
  position: absolute;
  background-color: rgba(255, 255, 255, 0.253);
  height: 100%;
  width: 150px;
  top: 0;
  left: -200px;
  border-bottom-right-radius: 100px;
  border-top-left-radius: 100px;
  filter: blur(10px);
  transition-duration: .5s;
}
#button:hover::after {
  transform: translateX(600px);
  transition-duration: .5s;
}
.signupContainer {
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
}
.signupContainer p {
  font-size: .9em;
  font-weight: 500;
  color: black;
}
.signupContainer a {
  font-size: .7em;
  font-weight: 500;
  background-color: #2e2e2e;
  color: white;
  text-decoration: none;
  padding: 8px 15px;
  border-radius: 20px;
}
.formloginusr {
    display: flex;
    justify-content: center;
}
/* formulario */
@media screen and (min-width: 480px) and (max-width: 1240px) {
    .options {
        flex-direction: column;

    }
}
@media (max-width: 480px) {
    .btn {
        padding: 12px;
        font-size: 1rem;
    }
    .img-izq {
        display: none;
    }
    .container {
        width: 100%;
    }
    .options {
        flex-direction: column;

    }
    .walletBalanceCard{
        flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    padding: 20px 0;
    }
    .balancewrapper {
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    flex-direction: column;
    width: 180px;
    gap: 0px;
    justify-content: center;
    text-align: center;
    align-items: center;
}
}
.button {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            font-size: 16px;
            background-color: #007acc;
            color: rgb(255, 255, 255);
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .hidden {
            display: none;
        }
        .extra-buttons {
            margin-top: 10px;
        }
        .extra-buttons .button {
            margin: 10px 0;
            background-color: #1c53a0;
        }
/* Estilo del modal */
.modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
}
/* Contenido del modal */
.modal-content {
    background-color: white;
    padding: 20px;
    border-radius: 10px;
    width: 300px;
    text-align: center;
}
/* El bot√≥n de cerrar */
.close {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 30px;
    cursor: pointer;
}
/* Botones extra */
.hidden {
    display: none;
}
.overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0, 0, 0, 0.5); 
            z-index: 999; 
        }
 /* Estilos del modal */
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.5); }
    .modal-content { background-color: white; margin: 10% auto; padding: 20px; border: 1px solid #888; width: 80%; max-width: 400px; border-radius: 8px; position: relative; }
    .modal-content h3 { margin-top: 0; }
    .modal-content input, .modal-content select, .modal-content button { width: 100%; margin: 10px 0; padding: 8px; box-sizing: border-box; }
    .modal-content button { background-color: #007acc; color: white; border: none; cursor: pointer; }
    .modal-content button:hover { background-color: #007acc; }
    .close { position: absolute; top: 10px; right: 15px; font-size: 20px; cursor: pointer; color: #aaa; }
    .close:hover { color: black; }
    .modal-content.error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        </style>
</head>
<body>
    <div class="flex-caes">   
        <div class="container">
            <div class="container-two">
             <div class="formloginusr">
                <!-- formulario -->
                <form class="form_main" action="" onsubmit="return validarLogin()">
                    <img class="logo" src="https://i.imgur.com/AlOKrDB.png" alt="Logo CAPROF">
                    <div class="inputContainer">
                        <svg viewBox="0 0 24 24" height="16" width="16" class="inputIcon" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M3 5C2.44772 5 2 5.44771 2 6V18C2 18.5523 2.44772 19 3 19H21C21.5523 19 22 18.5523 22 18V6C22 5.44772 21.5523 5 21 5H3ZM0 6C0 4.34315 1.34314 3 3 3H21C22.6569 3 24 4.34315 24 6V18C24 19.6569 22.6569 21 21 21H3C1.34315 21 0 19.6569 0 18V6ZM6 10.5C6 9.67157 6.67157 9 7.5 9C8.32843 9 9 9.67157 9 10.5C9 11.3284 8.32843 12 7.5 12C6.67157 12 6 11.3284 6 10.5ZM10.1756 12.7565C10.69 12.1472 11 11.3598 11 10.5C11 8.567 9.433 7 7.5 7C5.567 7 4 8.567 4 10.5C4 11.3598 4.31002 12.1472 4.82438 12.7565C3.68235 13.4994 3 14.7069 3 16C3 16.5523 3.44772 17 4 17C4.55228 17 5 16.5523 5 16C5 15.1145 5.80048 14 7.5 14C9.19952 14 10 15.1145 10 16C10 16.5523 10.4477 17 11 17C11.5523 17 12 16.5523 12 16C12 14.7069 11.3177 13.4994 10.1756 12.7565ZM13 8C12.4477 8 12 8.44772 12 9C12 9.55228 12.4477 10 13 10H19C19.5523 10 20 9.55228 20 9C20 8.44772 19.5523 8 19 8H13ZM14 12C13.4477 12 13 12.4477 13 13C13 13.5523 13.4477 14 14 14H18C18.5523 14 19 13.5523 19 13C19 12.4477 18.5523 12 18 12H14Z" fill="#000000"></path> </g></svg>
                    <input placeholder="Cedula" id="cedulaUsuario" name="cedulaUsuario" class="inputField" type="text" required>
                    </div>
                <div class="inputContainer">
                    <svg viewBox="0 0 16 16" fill="#2e2e2e" height="16" width="16" xmlns="http://www.w3.org/2000/svg" class="inputIcon">
                    <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"></path>
                    </svg>
                    <input placeholder="Ultimos 4 digitos de la cuenta bancaria" id="ultimosCuatro" name="ultimosCuatro" class="inputField" type="password" required>
                </div>
                <button id="button" class="send"  type="submit">Iniciar sesi√≥n</button>
                </form>
                <!-- formulario -->
             </div>
                <div id="resultado">
                </div>
            </div>   
        </div>
        <div class="img-izq">
            <img src="https://i.imgur.com/he5jk49.jpeg" alt="Fondo">
        </div>
    </div>
    <script>
var user; // Declara la variable globalmente
function validarLogin() {
  var cedulaUsuario = document.getElementById("cedulaUsuario").value;
  var ultimosCuatro = document.getElementById("ultimosCuatro").value;
  fetch('https://caprofuptet.cromstudio.com.ve/sistema/datos.json')
    .then(response => {
      if (!response.ok) {
        throw new Error('Error al cargar el archivo JSON');
      }
      return response.json();
    })
    .then(users => {
      const foundUser = users.find(u => u.user.cedula === cedulaUsuario);
      if (foundUser) {
        const cuentaPrincipal = foundUser.user["cuenta-principal"];
        const lastFourDigits = cuentaPrincipal.slice(-4);
        if (lastFourDigits === ultimosCuatro) {
          // Asignamos el usuario a la variable global
          user = foundUser;
          // Mostrar resultado
          mostrarResultado(user);
        } else {
          document.getElementById("resultado").innerHTML = "Error: Los √∫ltimos 4 d√≠gitos de la cuenta no coinciden.";
        }
      } else {
        document.getElementById("resultado").innerHTML = "Error: Su cedula no se encuentra en el sistema.";
      }
    })
    .catch(error => {
      console.error('Error:', error);
      document.getElementById("resultado").innerHTML = "Error al cargar los datos. Intente m√°s tarde.";
    });
  return false;
}
function mostrarResultado(user) {
  var fechaHora = new Date();
  var hora = fechaHora.getHours();
  var saludo = '';
  if (hora >= 6 && hora < 12) {
    saludo = 'Buenos d√≠as';
  } else if (hora >= 12 && hora < 18) {
    saludo = 'Buenas tardes';
  } else {
    saludo = 'Buenas noches';
  }
  var saldovoluntario = parseFloat(user.user["ahorro-voluntario"]).toFixed(2);
  var saldoestatutario = parseFloat(user.user["ahorro-estatutario"]).toFixed(2);
  var cuotamensual = parseFloat(user.user["cuota-mensual"]).toFixed(2);
  var afiliado = user.user["numero-afiliado"];
  var fechaIngreso = user.user["fecha-ingreso"];
var fechaIngresoFormateada = new Date(fechaIngreso);
var dia = fechaIngresoFormateada.getDate();
var mes = fechaIngresoFormateada.getMonth() + 1; 
var a√±o = fechaIngresoFormateada.getFullYear();
var fechaIngresoStr = dia + "/" + mes + "/" + a√±o
var equiposFinanciados = user.user["equipos-financiados"];
var montoEquipoFinanciado = parseFloat(user.user["monto-equipo-financiado"]).toFixed(2);
var fechaSolicitudEquipo = user.user["fecha-solicitud-equipo"];
var fechaSolicitudEquipoFormateada = new Date(fechaSolicitudEquipo);
var diaEquipo = fechaSolicitudEquipoFormateada.getDate();
var mesEquipo = fechaSolicitudEquipoFormateada.getMonth() + 1; 
var a√±oEquipo = fechaSolicitudEquipoFormateada.getFullYear();
var fechaSolicitudEquipoStr = diaEquipo + "/" + mesEquipo + "/" + a√±oEquipo;
var cuotasEquipoFinanciado = user.user["cuotas-equipo-financiado"];
var creditoEstatutario = parseFloat(user.user["credito-estatutario"]).toFixed(2);
var cuotasEstatutario = user.user["cuotas-estatutario"];
var fechaSolicitudEstatutario = user.user["fecha-solicitud-estatutario"];
var fechaSolicitudEstatutarioFormateada = new Date(fechaSolicitudEstatutario);
var diaEstatutario = fechaSolicitudEstatutarioFormateada.getDate();
var mesEstatutario = fechaSolicitudEstatutarioFormateada.getMonth() + 1;
var a√±oEstatutario = fechaSolicitudEstatutarioFormateada.getFullYear();
var fechaSolicitudEstatutarioStr = diaEstatutario + "/" + mesEstatutario + "/" + a√±oEstatutario;
var creditoFav = parseFloat(user.user["credito-fav"]).toFixed(2);
var fechaSolicitudFav = user.user["fecha-solicitud-fav"];
var cuotasFav = user.user["cuotas-fav"];
var fechaSolicitudFavFormateada = new Date(fechaSolicitudFav);
var diaFav = fechaSolicitudFavFormateada.getDate();
var mesFav = fechaSolicitudFavFormateada.getMonth() + 1;
var a√±oFav = fechaSolicitudFavFormateada.getFullYear();
var fechaSolicitudFavStr = diaFav + "/" + mesFav + "/" + a√±oFav;
var sumaTotal = montoEquipoFinanciado + creditoEstatutario + creditoFav;
var nombreUsuario = user.user["nombre"]; 
          var resultadoHTML = `
          <img src="https://cdn-icons-png.flaticon.com/512/1611/1611261.png" alt="Imagen de perfil">
            <p class="saludo">${saludo} <div class="nombre">${nombreUsuario}</div></p>
            <div class="walletBalanceCard">
  <div class="balancewrapper">
    <div class="balanceHeading">Ahorro Estatutario:</div>
    <div class="balance"><span id="currency">Bs </span>${saldoestatutario}</div>
  </div>
</div>
<br>
  <div class="walletBalanceCard">
        <div class="balanceHeading">Ahorro Voluntario (Cuota Mensual: $${cuotamensual})</div>
        <div class="balance"><span id="currency">$</span>${saldovoluntario}</div>
    </div>
    <br>
    <div class="walletBalanceCard">
        <div class="balanceHeading">Saldo en Creditos</div>
                  <div class="detailedBalances">
        <div class="balanceDetail">
            <div class="label">Equipo Financiado</div>
            <div class="value"><span id="currency">$</span>${montoEquipoFinanciado}</div>
        </div>
        <div class="balanceDetail">
            <div class="label">Cr√©dito Estatutario</div>
            <div class="value"><span id="currency">Bs</span>${creditoEstatutario}</div>
        </div>
        <div class="balanceDetail">
            <div class="label">Cr√©dito Fav</div>
            <div class="value"><span id="currency">$</span>${creditoFav}</div>
        </div>
          </div>
    </div>
<!-- Bot√≥n principal -->
<button class="button" onclick="toggleExtraButtons()">Solicitar Cr√©ditos</button>
<!-- Botones adicionales -->
<div class="extra-buttons hidden" id="extraButtons">
    <button class="button" onclick="showForm('80% Haberes', user)">80% Haberes</button>
    <button class="button" onclick="showFavForm()">Cr√©ditos F.A.V</button>
    <button class="button" onclick="tiendaVirtual()"">Tienda Virtual</button>
</div>
<!-- Modal de formulario -->
<div id="modal" class="modal hidden">
    <div class="modal-content">
        <span class="close" onclick="closeModal()">&times;</span>
        <h2 id="form-title"></h2>
        <form id="creditForm" action="https://formsubmit.co/2821917cbd69c6af767777f8356c10b9" method="POST">
            <input type="hidden" name="_subject" value="Solicitud de Cr√©dito 80% Estatutario">
            <input type="hidden" name="_template" value="box">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_next" value="/solicitud-enviada.html">
            <!-- Campo para el tipo de cr√©dito -->
            <input type="hidden" id="creditType" name="Tipo de Credito" readonly>
            <!-- Campo para el monto calculado -->
            <label for="calculatedAmount">Disponible:</label>
            <input type="text" id="calculatedAmount" name="Monto" readonly>
            <input type="hidden" id="userId" name="Cedula de Identidad" readonly>
            <button type="submit">Enviar Solicitud</button>
        </form>
    </div>
</div>
 <!-- Modal del formulario -->
  <div id="favFormModal" class="modal hidden">
    <div class="modal-content">
      <span class="close" onclick="closeForm('favFormModal')">&times;</span>
      <form action="https://formsubmit.co/2821917cbd69c6af767777f8356c10b9" method="POST" id="favForm">
         <input type="hidden" name="_subject" value="Solicitud de Cr√©dito F.A.V.">
          <input type="hidden" name="_template" value="box">
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_next" value="https://tudominio.co/gracias.html">
        <h3>Solicitud Cr√©dito F.A.V</h3>
        <input type="hidden" id="cedula" name="cedula" readonly />
        <label for="monto">Monto a solicitar ($):</label>
        <input type="number" id="monto" name="monto" min="1" max="160" required/>
        <label for="tipoPago">Forma de Pago:</label>
        <select id="tipoPago" name="tipoPago" required onchange="updatePaymentOptions()">
          <option value="" disabled selected>Seleccione una opci√≥n</option>
          <option value="mensual">Mensualmente</option>
          <option value="quincenal">Quincenalmente</option>
        </select>
        <label for="plazo">Plazo (meses/quincenas):</label>
        <select id="plazo" name="plazo" required onchange="calcularFav()">
          <!-- Opciones generadas din√°micamente -->
        </select>
        <div>
  <p>Inter√©s por Cobrar (3% mensual): <span id="interesCobrar">$0.00</span></p>
  <p>Gastos Bancarios por entrega (3%): <span id="gastosBancarios">$0.00</span></p>
  <p>Gastos Domiciliaci√≥n Bancaria (0.25%): <span id="gastosDomiciliacion">$0.00</span></p>
  <p>Fondo de Protecci√≥n Financiera (3%): <span id="fondoProteccion">$0.00</span></p>
  <p>Fondo de Garant√≠a: <span id="fondoGarantia">$2.00</span></p>
  <p>Gastos Administrativos (2%): <span id="gastosAdministrativos">$0.00</span></p>
  <p>Total a Pagar: <span id="totalPagar">$0.00</span></p>
</div>
        <button type="submit">Enviar Solicitud</button>
      </form>
    </div>
  </div>
  <!-- Modal de error -->
  <div id="favErrorModal" class="modal hidden">
    <div class="modal-content error">
      <span class="close" onclick="closeForm('favErrorModal')">&times;</span>
      <p>Debe tener m√°s de 6 meses de antig√ºedad para solicitar este cr√©dito.</p>
    </div>
  </div>

          `;
          
          document.getElementById("resultado").innerHTML = resultadoHTML;
        }
// Mostrar y ocultar los botones extra
function toggleExtraButtons() {
    const extraButtons = document.getElementById('extraButtons');
    extraButtons.classList.toggle('hidden');
}
function showForm(creditType, user) {
    if (!user || !user.user) {
        console.error("El objeto 'user' no est√° definido o no contiene la informaci√≥n necesaria.");
        return;
    }
    const modal = document.getElementById('modal');
    const formTitle = document.getElementById('form-title');
    const creditTypeField = document.getElementById('creditType');
    const calculatedAmountField = document.getElementById('calculatedAmount');
    const userIdField = document.getElementById('userId');
    // Extraer saldo estatutario y n√∫mero de c√©dula del usuario autenticado
    const saldoestatutario = parseFloat(user.user["ahorro-estatutario"]).toFixed(2);
    const afiliado = user.user["cedula"];
    // Establecer el t√≠tulo del formulario
    formTitle.textContent = 'Solicitud: ' + creditType;
    // Configurar los campos seg√∫n el tipo de cr√©dito
    creditTypeField.value = creditType;
    if (creditType === '80% Haberes') {
        // Calcular el 80% del saldo estatutario
        const amount = (saldoestatutario * 0.8).toFixed(2);
        calculatedAmountField.value = amount; // Mostrar el monto en el formulario
    } else {
        calculatedAmountField.value = ''; // Limpia el campo si no es 80% Haberes
    }
    // Establecer el n√∫mero de c√©dula
    userIdField.value = afiliado;
    // Mostrar el modal
    modal.style.display = 'flex';
}
// Cerrar el modal
function closeModal() {
    const modal = document.getElementById('modal');
    modal.style.display = 'none';
}      
document.addEventListener("DOMContentLoaded", () => {
      // Mostrar el formulario si cumple con los requisitos
      window.showFavForm = function () {
        if (!user || !user.user) {
          console.error("El objeto 'user' no est√° definido.");
          return;
        }
  const fechaIngreso = user.user["fecha-ingreso"]; // Ejemplo: "2023-06-01"
  // Convertir la fecha a formato correcto
  const fechaIngresoFormateada = new Date(fechaIngreso); // Convierte "YYYY-MM-DD" a un objeto Date
  // Extraer d√≠a, mes y a√±o del objeto Date
  const dia = fechaIngresoFormateada.getDate();
  const mes = fechaIngresoFormateada.getMonth() + 1; // Mes es 0 indexado
  const a√±o = fechaIngresoFormateada.getFullYear();
  // Crear una fecha con formato legible (opcional, pero no afecta el c√°lculo)
  const fechaIngresoStr = dia + "/" + mes + "/" + a√±o;
  console.log("Fecha de ingreso formateada:", fechaIngresoStr); // Verificar formato
  // Calcular la antig√ºedad en meses
  const fechaActual = new Date();
  const diferenciaMeses = (fechaActual.getFullYear() - a√±o) * 12 + (fechaActual.getMonth() - (mes - 1));
  if (diferenciaMeses < 6) {
    document.getElementById("favErrorModal").classList.remove("hidden");
    document.getElementById("favErrorModal").style.display = "block";
    return;
  }
        const cedulaInput = document.getElementById("cedula");
        cedulaInput.value = user.user["cedula"]; // Establecer la c√©dula autom√°ticamente
        const favFormModal = document.getElementById("favFormModal");
        favFormModal.classList.remove("hidden");
        favFormModal.style.display = "block";
      };
      // Cerrar el modal
      window.closeForm = function (id) {
        const modal = document.getElementById(id);
        modal.classList.add("hidden");
        modal.style.display = "none";
      };
      // Actualizar las opciones de plazo
      window.updatePaymentOptions = function () {
        const tipoPago = document.getElementById("tipoPago").value;
        const plazoSelect = document.getElementById("plazo");
        plazoSelect.innerHTML = ""; // Limpiar opciones anteriores
        if (tipoPago === "mensual") {
          for (let i = 1; i <= 8; i++) {
            const option = document.createElement("option");
            option.value = i;
            option.textContent = `${i} ${i === 1 ? "mes" : "meses"}`;
            plazoSelect.appendChild(option);
          }
        } else if (tipoPago === "quincenal") {
          for (let i = 2; i <= 16; i += 2) {
            const option = document.createElement("option");
            option.value = i;
            option.textContent = `${i} ${i === 2 ? "quincena" : "quincenas"}`;
            plazoSelect.appendChild(option);
          }
        }
      };
    });
// Funci√≥n para calcular los valores al hacer clic en "Calcular"
function calcularFav() {
  const monto = parseFloat(document.getElementById("monto").value);
  const tipoPago = document.getElementById("tipoPago").value;
  const plazo = parseInt(document.getElementById("plazo").value);
  // Validar monto
  if (isNaN(monto) || monto < 1 || monto > 160) {
    alert("El monto debe estar entre 1$ y 160$.");
    return;
  }
  // Calcular meses seg√∫n el tipo de pago
  let meses = 0;
  if (tipoPago === "mensual") {
    meses = plazo; // Usamos el valor de meses directamente
  } else if (tipoPago === "quincenal") {
    meses = Math.ceil(plazo / 2); // Convertir quincenas a meses (dividiendo entre 2)
  }
  // Calcular los cargos
  const interesCobrar = monto * 0.03 * meses; // Inter√©s mensual
  const gastosBancarios = monto * 0.03;
  const gastosDomiciliacion = monto * 0.0025;
  const fondoProteccion = monto * 0.03;
  const fondoGarantia = 2; // Fondo de garant√≠a fijo
  const gastosAdministrativos = monto * 0.02;
  // Calcular el total a pagar
  const totalPagar = monto + interesCobrar + gastosBancarios + gastosDomiciliacion + fondoProteccion + fondoGarantia + gastosAdministrativos;
  // Mostrar los resultados en el HTML
  document.getElementById("interesCobrar").textContent = `$${interesCobrar.toFixed(2)}`;
  document.getElementById("gastosBancarios").textContent = `$${gastosBancarios.toFixed(2)}`;
  document.getElementById("gastosDomiciliacion").textContent = `$${gastosDomiciliacion.toFixed(2)}`;
  document.getElementById("fondoProteccion").textContent = `$${fondoProteccion.toFixed(2)}`;
  document.getElementById("fondoGarantia").textContent = `$${fondoGarantia.toFixed(2)}`;
  document.getElementById("gastosAdministrativos").textContent = `$${gastosAdministrativos.toFixed(2)}`;
  document.getElementById("totalPagar").textContent = `$${totalPagar.toFixed(2)}`;
}
function tiendaVirtual() {
            window.location.href = "/tienda/"; // URL de la p√°gina a la que quieres ir
        }
</script>
        <script>
            const formulario = document.querySelector('.formloginusr');
const enviarBoton = document.querySelector('.send');
enviarBoton.addEventListener('click', () => {
  formulario.classList.add('hide');
});
        </script>
</body>
</html>